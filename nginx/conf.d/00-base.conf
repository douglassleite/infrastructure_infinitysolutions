# ===========================================
# Base Configuration - Upstreams & Rate Limits
# Este arquivo SEMPRE deve estar ativo
# ===========================================

# Rate limiting zones
limit_req_zone $binary_remote_addr zone=api:10m rate=30r/s;
limit_req_zone $binary_remote_addr zone=web:10m rate=50r/s;
limit_req_zone $binary_remote_addr zone=login:10m rate=5r/m;

# Upstream servers
upstream backend {
    server personal-trainer-backend:3001;
    keepalive 32;
}

upstream frontend {
    server personal-trainer-web:3000;
    keepalive 32;
}

upstream website {
    server infinity-website:80;
    keepalive 32;
}

upstream evolly {
    server evolly:8004;
    keepalive 32;
}

# Sites de casamento individuais (adicionar conforme necess√°rio)
upstream vanessaemarlo {
    server evolly-vanessaemarlo:80;
    keepalive 32;
}
